"use strict";!function(e,t){let a={},s={},r={},o={rcpeName:"",yourName:"",message:""},i=0,n="No",l="No";const g=e("#woSu"),c=e("#woSuStep"),d=g.find("> section"),m=t=>{for(let i of t.data("variations"))if(i.attributes.attribute_pa_plans===s.slug){a={pName:t.find("h4").text(),pID:parseInt(t.data("id")),vName:s.name,vID:parseInt(i.variation_id),regularPrice:parseFloat(i.display_regular_price),price:parseFloat(i.display_price),dogName:r.name,dogGender:r.gender,dogMOB:r.mob,dogSize:r.size.name,dogAllergy:r.allergy,extraToy:n,douTro:l},e("#pName").text(a.pName),e("#vName").text(a.vName),e("#price").text(woSu.currency+a.price),e("#dogNameF").text(a.dogName),e("#dogGenderF").text(a.dogGender),e("#dogMOBF").text(a.dogMOB),e("#dogSizeF").text(a.dogSize),e("#xToy").text(a.extraToy),e("#douTro").text(a.douTro),a.dogAllergy.toString().length>20?e("#dogAllergy").addClass("long-text").text(a.dogAllergy):e("#dogAllergy").removeClass("long-text").text(a.dogAllergy),"gift"===woSu.mode&&(e("#giftReceive").text(o.rcpeName),e("#giftSend").text(o.yourName),e("#giftMessage").text(o.message),o.message.toString().length>20?e("#giftMessage").addClass("long-text").text(o.message):e("#giftMessage").removeClass("long-text").text(o.message));break}},u=(t,a)=>{e(`#woSu-p-${t} .section-err`).text("").text(a)};g.steps({headerTag:"h3",bodyTag:"section",enablePagination:!1,transitionEffect:"fade",startIndex:"subscribe"===woSu.mode?1:0,onInit:(e,t)=>{c.animate({width:(t/d.length*100).toString()+"%"},400,"linear")},onStepChanging:(t,i,n)=>{const l=e("#crates .selected");switch(i){case 1:if(r.name=e("#dogName").val(),r.gender=e('input[name="dog_gender"]:checked').val()||"",r.mob=e("#dogMOB").val(),(""===r.name||""===r.gender||""===r.mob)&&n>i)return u(i,woSu.message.m1),!1;g.find(".dog-name").text(r.name),e.isEmptyObject(s)||e.isEmptyObject(a)||m(l);break;case 2:if(0===e("#size .selected").length&&n>i)return u(i,woSu.message.m2),!1;e.isEmptyObject(s)||e.isEmptyObject(a)||m(l);break;case 3:{const t=e("#allergy .selected"),o=e("#descAllergy").val(),g=t.attr("id");if(0===t.length&&n>i)return u(i,woSu.message.m3),!1;if("haveAllergy"===g&&""===o&&n>i)return u(i,woSu.message.m4),!1;"haveAllergy"===g?r.allergy=o:"noAllergy"===g&&(r.allergy="No"),e.isEmptyObject(s)||e.isEmptyObject(a)||m(l);break}case 4:if(0===l.length&&n>i)return u(i,woSu.message.m5),!1;e.isEmptyObject(s)||m(l);break;case 5:if(0===e("#plans .selected").length&&n>i)return u(i,woSu.message.m6),!1;m(l);break;case 6:case 7:m(l);break;case 8:"gift"===woSu.mode&&(o={rcpeName:e("#rcpeName").val(),yourName:e("#yourName").val(),message:e("#message").val()},m(l))}return u(i,""),!0},onStepChanged:(t,a,s)=>{i=s,c.animate({width:(a/d.length*100).toString()+"%"},400,"linear"),"gift"===woSu.mode&&8===s&&(e("#giftTo").text(o.rcpeName),e("#giftFrom").text(o.yourName),e("#giftMessage").text(o.message)),e("html, body").animate({scrollTop:0})},onFinished:(s,r)=>{a.dt=e("#dt").val(),a.action="woofsubsAddToCart","gift"===woSu.mode&&(a.gift=1,a.giftToName=o.rcpeName,a.giftFromName=o.yourName,a.giftMessage=o.message),e.post(wc_add_to_cart_params.ajax_url,a,a=>{"ok"===a.status?t.location=woSu.checkoutURL:(e('button[data-href="#f"]').prop("disabled","false"),g.unblock(),alert(a.message))},"json")}}),e(".series").on("click",".boxes > div",function(){const t=e(this),a=t.parent(),o=t.parents(".series");switch(o.attr("id")){case"size":r.size={name:t.find("h4").text(),slug:a.data("slug")};break;case"plans":s={name:t.find("h4").text(),slug:a.data("slug")};break;case"doubleTrouble":case"extraToy":return o.next().find(".far").trigger("click"),!1}a.addClass("selected").siblings().removeClass("selected"),i===d.length-1?e(".steps .last > a").trigger("click"):g.steps("next")}),e(".checkbox .far").on("click",function(){const t=e(this);switch(t.parent().attr("id")){case"isAddToy":n=t.hasClass("fa-circle")?"Yes":"No";break;case"isDouble":l=t.hasClass("fa-circle")?"Yes":"No"}t.toggleClass("fa-circle fa-check-circle")}),e(".yesno").on("click",function(t){const a=e(this),s=a.parent();switch(a.addClass("selected").siblings().removeClass("selected"),s.attr("id")){case"allergy":{t.preventDefault();const r=s.next();"haveAllergy"===a.attr("id")?r.removeClass("hide"):"noAllergy"===a.attr("id")&&(r.addClass("hide"),i===d.length-1?e(".steps .last > a").trigger("click"):g.steps("next"));break}case"subsGift":"gotoGif"===a.attr("id")&&(t.preventDefault(),i===d.length-1?e(".steps .last > a").trigger("click"):g.steps("next"))}}),e(".sections > nav > button").on("click",function(t){t.preventDefault();const a=e(this),s=a.data("href");"#n"===s?i===d.length-1?e(".steps .last > a").trigger("click"):g.steps("next"):"#p"===s?g.steps("previous"):"#f"===s&&(a.prop("disabled","true"),g.block(),g.steps("finish"))}),e(".summary .fa-edit").on("click",function(t){t.preventDefault(),e(`.steps #woSu-t-${e(this).data("step")}`).trigger("click")})}(jQuery,window);